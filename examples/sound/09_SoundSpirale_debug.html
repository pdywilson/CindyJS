<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    
    <title>09_SoundSpirale.cdy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://cindyjs.org/dist/v0.8/CindyJS.css">
<script type="text/javascript" src="../../build/js/Cindy.js"></script>
<script id="csdraw" type="text/x-cindyscript">
  B.angle=B.angle+1°;
w=B.angle/360°;
w=floor(w*12)/12;
pow=1-w;

F.y=0;
g(x):=exp(-(x-F.x)^2*|C,E|*10);
plot(g(x));

f(x):=log(x);




l=1..200;
mask=apply(1..200,
x=log(#)/log(2);
erg=0;

if(x~=round(x),erg=1);
if((x-log(3)/log(2))~=round(x-log(3)/log(2)),erg=1);
if((x-log(5)/log(2))~=round(x-log(5)/log(2)),erg=.3);
if((x-log(7)/log(2))~=round(x-log(5)/log(2)),erg=.1);

erg;
);


freq(x):=l_x*2^pow;;
li=1..length(l);
vals=apply(li,x=freq(#);g(f(x))*mask_#);

apply(li,x=freq(#);
  if(vals_#!=0,
    draw((f(x),0),(f(x),vals_#),color->(.7,0,0),size->3);
);
//  draw((f(x),0),color->(1,0,0));
);

//  playsin(10*2^pow,harmonics->vals,amp->.1*|C,E|,line->1);

if(wo!=w,
  playsin(10*2^pow,harmonics->vals,amp->.05,damp->10,line->1);
);

wo=w;

;
</script>
<script id="cstick" type="text/x-cindyscript">
a;
</script>
<script id="csinit" type="text/x-cindyscript">
//playanimation();
</script>
    <script type="text/javascript">
var cdy = CindyJS({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "°",
  geometry: [
    {name: "A", type: "Free", pos: [4.0, 2.10946262983011, 1.0577845323185895], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "C0", type: "CircleByRadius", pos: {xx: 0.05606549172594702, yy: 0.05606549172594702, zz: 1.0, xy: 0.0, xz: -0.4240220197060768, yz: 0.2236146511987639}, color: [0.0, 0.0, 1.0], radius: 0.6635611953693494, args: ["A"], printname: "$C_{0}$"},
    {name: "B", type: "PointOnCircle", pos: [4.0, {r: 2.6178764101136953, i: -1.0871368596208357E-15}, {r: 0.9992792729820651, i: -2.693262007383571E-16}], color: [1.0, 0.0, 0.0], args: ["C0"], labeled: true},
    {name: "", type: "OtherPointOnCircle", pos: [4.0, {r: 1.5378139394951917, i: 7.658686572069803E-16}, {r: 1.1235664921599893, i: 2.913473259549462E-16}], color: [1.0, 1.0, 1.0], args: ["B"], pinned: true, size: 0.0},
    {name: "C", type: "Free", pos: [4.0, 2.115862934794448, 0.8386026695905482], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "D", type: "Free", pos: [4.0, 1.7080916298675228, 0.6793205539943797], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "a", type: "Segment", color: [0.0, 0.0, 1.0], args: ["C", "D"], labeled: true},
    {name: "E", type: "PointOnSegment", pos: [4.0, 2.004748099043515, 0.7951994043320939], color: [1.0, 0.0, 0.0], args: ["a"], labeled: true},
    {name: "F", type: "Free", pos: [4.0, 0.0, 1.2531540989980168], color: [1.0, 0.0, 0.0], labeled: true},
    {name: "Anim0", type: "AnimationAlg", color: [0.0, 0.0, 1.0], args: ["B", "C0"], dock: {offset: [0.0, -0.0]}}
  ],
  animation: {
    autoplay: false,
    controls: true,
    speed: 0.20618556701030927,
    speedRange: [0.0, 1.0],
    accuracy: 1
  },
  autoplay: false,
  animcontrols: true,
  ports: [{
    id: "CSCanvas",
    width: 938,
    height: 475,
    transform: [{visibleRect: [-1.001355493998153, 3.064754693751923, 7.130864881501999, -1.0533739612188364]}],
    axes: true,
    background: "rgb(168,176,192)"
  }],
  csconsole: false,
  cinderella: {build: 1901, version: [2, 9, 1901]}
});
    </script>
</head>
<body>
    <div id="CSCanvas"></div>
</body>
</html>